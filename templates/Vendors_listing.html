{% extends "layout.html" %}

{% block additional_js %}
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.15.5/dist/bootstrap-table.min.css">

{% endblock additional_js %}

{% block content %}
<div class="bd-example">

    <table class="table table-striped table-hover table-sm" id = "Smart_listing_table">
      <thead>
        <tr class ="thead-dark">

            <th scope="col" id ="vendor" value="vendor" >vendor</th>
            <th scope="col" id ="Account code" value="Account code" >Account code </th>
            <th scope="col" id ="MCST" value="MCST" >MCST </th>

        </tr>
      </thead>
      <tbody id="Smart_listing_table_body">
        {% for vendors_item in vendors_list%}
            {% if loop.index == 1 %}
                <tr>
                    <td scope="row">{{vendors_item.debtor_creditor}}</td>
                    <td scope="row">{{vendors_item.account_code}}</td>
                    <td scope="row">{{vendors_item.Mcst_no}}</td>
                </tr>
            {% else %}
                {% if vendors_item.debtor_creditor != loop.previtem.debtor_creditor %}
                <tr>
                    <td scope="row">{{vendors_item.debtor_creditor}}</td>
                    <td scope="row">{{vendors_item.account_code}}</td>
                    <td scope="row">{{loop.previtem.debtor_creditor}}</td>

                </tr>
                {% endif %}
            {% endif %}
        {% endfor %}
      </tbody>

    </table>
</div>
{% endblock content %}
{% block add_on_js %}


<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>


<script>
    $("#Smart_listing_table").DataTable(


    );
</script>
<script>
    $(document).ready(function(){
          $("#search_text").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            var header_value = $("#header_selector").val();
            $("#Smart_listing_table_body tr").filter(function() {
                if($("#header_selector").val() ==  "Search All field" ){
                     $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);

                }
                else {
                        var i ,tr , header_index
                        header_index = $( "#" + $("#header_selector").val()).index()
                        tr = $("tr")
                        for (i = 0; i < tr.length; i++) {
                        td = tr[i].getElementsByTagName("td")[header_index];
                        if (td) {
                          txtValue = td.textContent || td.innerText;
                          if (txtValue.toLowerCase().indexOf(value) > -1) {
                            tr[i].style.display = "";
                          } else {
                            tr[i].style.display = "none";
                          }
                        }
                       }
                   }
                });
          });
        });

</script>


{% endblock add_on_js %}